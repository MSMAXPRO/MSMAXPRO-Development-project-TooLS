<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AI Text Scanner (OCR)</title>
    <!-- Importing Tesseract.js for OCR -->
    <script src="https://unpkg.com/tesseract.js@v2.1.0/dist/tesseract.min.js"></script>
    <style>
        body { background: #111827; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        
        .container { width: 100%; max-width: 700px; background: #1f2937; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); }
        
        h1 { text-align: center; color: #60a5fa; margin-top: 0; letter-spacing: 1px; }
        
        .upload-section {
            border: 2px dashed #4b5563; padding: 40px; text-align: center; border-radius: 10px; cursor: pointer; transition: 0.3s; background: #374151; margin-bottom: 20px;
        }
        .upload-section:hover { border-color: #60a5fa; background: #4b5563; }
        
        .preview-img { max-width: 100%; max-height: 300px; border-radius: 5px; margin-top: 20px; display: none; border: 1px solid #4b5563; }
        
        button {
            width: 100%; padding: 15px; background: #2563eb; color: white; border: none; border-radius: 8px; font-size: 1.1rem; font-weight: bold; cursor: pointer; transition: 0.2s; margin-top: 10px;
        }
        button:hover { background: #1d4ed8; }
        button:disabled { background: #4b5563; cursor: not-allowed; }

        .progress-bar { width: 100%; background: #374151; height: 10px; border-radius: 5px; margin-top: 20px; overflow: hidden; display: none; }
        .progress-fill { height: 100%; background: #10b981; width: 0%; transition: width 0.2s; }
        .status-text { text-align: center; margin-top: 5px; font-size: 0.9rem; color: #9ca3af; }

        textarea {
            width: 100%; height: 200px; background: #111827; color: #e5e7eb; border: 1px solid #4b5563; border-radius: 8px; padding: 15px; font-size: 1rem; margin-top: 20px; resize: vertical; box-sizing: border-box;
        }

        .controls { display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px; }
        .btn-copy { width: auto; background: #059669; padding: 8px 20px; font-size: 0.9rem; margin-top: 0; }
    </style>
</head>
<body>

    <div class="container">
        <h1>üîç AI Text Extractor</h1>
        <p style="text-align: center; color: #9ca3af; margin-bottom: 30px;">Extract text from images instantly. 100% Private.</p>

        <div class="upload-section" onclick="document.getElementById('fileIn').click()">
            <input type="file" id="fileIn" accept="image/*" style="display: none">
            <h3>Click to Upload Image</h3>
            <p style="color:#9ca3af; font-size: 0.9rem;">Supports JPG, PNG, BMP</p>
            <img id="preview" class="preview-img">
        </div>

        <button id="scanBtn" onclick="startScan()" disabled>START SCANNING</button>

        <div class="progress-bar" id="progressBar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="status-text" id="statusText"></div>

        <textarea id="resultText" placeholder="Extracted text will appear here..."></textarea>
        
        <div class="controls">
            <button class="btn-copy" onclick="copyText()">Copy Text</button>
        </div>
    </div>

    <script>
        const fileIn = document.getElementById('fileIn');
        const preview = document.getElementById('preview');
        const scanBtn = document.getElementById('scanBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const statusText = document.getElementById('statusText');
        const resultText = document.getElementById('resultText');

        let selectedFile = null;

        fileIn.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                selectedFile = file;
                preview.src = URL.createObjectURL(file);
                preview.style.display = 'block';
                scanBtn.disabled = false;
                scanBtn.innerText = "START SCANNING";
                resultText.value = "";
                // Hide upload text
                document.querySelector('.upload-section h3').style.display = 'none';
                document.querySelector('.upload-section p').style.display = 'none';
            }
        });

        function startScan() {
            if (!selectedFile) return;

            scanBtn.disabled = true;
            scanBtn.innerText = "Processing...";
            progressBar.style.display = 'block';
            statusText.innerText = "Initializing AI Engine...";

            Tesseract.recognize(
                selectedFile,
                'eng', // Language code (English)
                {
                    logger: m => {
                        if (m.status === 'recognizing text') {
                            const pct = Math.round(m.progress * 100);
                            progressFill.style.width = pct + "%";
                            statusText.innerText = `Scanning... ${pct}%`;
                        } else {
                            statusText.innerText = m.status;
                        }
                    }
                }
            ).then(({ data: { text } }) => {
                resultText.value = text;
                scanBtn.disabled = false;
                scanBtn.innerText = "SCAN AGAIN";
                statusText.innerText = "Scan Complete!";
                progressFill.style.width = "100%";
            }).catch(err => {
                console.error(err);
                statusText.innerText = "Error: " + err.message;
                scanBtn.disabled = false;
            });
        }

        function copyText() {
            resultText.select();
            document.execCommand('copy');
            const btn = document.querySelector('.btn-copy');
            const originalText = btn.innerText;
            btn.innerText = "Copied!";
            setTimeout(() => btn.innerText = originalText, 2000);
        }
    </script>
</body>
</html>